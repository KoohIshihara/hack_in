page-global-timeline
  div.wrap-page.f.fh
    h2 Global Time Line

  style(scoped, type='less').
    @import "public/stylesheets/main.less";
    @import "public/stylesheets/theme.less";
    :scope {
      .wrap-page {
        padding: 48px 0px;
        width: 100%;
        height: 100%;
        background: @primaryBg;
      }
    }

  script.

    var self = this;

    this.on('mount', function(){
      $('util-now-loading').fadeOut(400);
    });

    async function checkSignUp(){
      
      var user = session.userFireauth;

      var userObj = {
        name: user.displayName,
        uid: user.uid,
        author: user.uid,
        auth_token: session.token,
        profile: '',
        email: user.email,
        imgUrl: user.photoURL + '?width=892&amp;height=892',
        //hackedUid: user.uid,
        currentUser: {
          name: user.displayName,
          uid: user.uid,
          profile: '',
          imgUrl: user.photoURL + '?width=892&amp;height=892',
        },
      };

      session.user = userObj;

      await service.db.collection("users").add(userObj)
        .then(function(docRef) {
          console.log("Document written with ID: ", docRef.id);
        })
        .catch(function(error) {
          console.error("Error adding document: ", error);
          alert('Failed to Sign Up');
          logout();
        });

      riot.mount('header', 'util-header', {status: 'normal'});
      riot.mount('content', 'page-global-timeline');
      riot.update();
      
    }
    
    if(session.isNewUser){
      checkSignUp();
      session.isNewUser = false;
    }
